/*! bootstrap-window 0.4.0 2015-12-26 */
var Window=null;!function(a){"use strict";var b="bsw";Window=function(b){b=b||{};var c={selectors:{handle:".window-header",title:".window-title",body:".window-body",footer:".window-footer"},elements:{handle:null,title:null,body:null,footer:null},references:{body:a("body"),window:a(window)},"interface":{buttons:{minimize:{"class":"glyphicon glyphicon-minus"},maximize:{"class":"glyphicon glyphicon-plus"},restore:{"class":"glyphicon glyphicon-modal-window"}}},effect:"fade",parseHandleForTitle:!0,maximized:!1,maximizable:!1,minimized:!1,minimizable:!1,title:"No Title",bodyContent:"",footerContent:""};return this.options=a.extend(!0,{},c,b),this.initialize(this.options),this},Window.prototype.initialize=function(b){var c=this;if(b.fromElement)b.fromElement instanceof jQuery?this.$el=b.clone?b.fromElement.clone():b.fromElement:b.fromElement instanceof Element?this.$el=b.clone?a(b.fromElement).clone():a(b.fromElement):this.$el=b.clone?a(b.fromElement).clone():a(b.fromElement);else{if(!b.template)throw new Error("No template specified for window.");this.$el=a(b.template)}this.$el.hasClass("window")||this.$el.addClass("window"),this.$el.data("window",this),this.$el.find(b.selectors.handle).length<=0&&this.$el.prepend('<div class="window-header"><h4 class="window-title"></h4></div>'),b.elements.handle=this.$el.find(b.selectors.handle),b.elements.title=this.$el.find(b.selectors.title),b.elements.body=this.$el.find(b.selectors.body),b.elements.footer=this.$el.find(b.selectors.footer),b.elements.title.html(b.title),b.minimizable&&(b.elements.buttons={},b.elements.buttons.minimize=a('<button data-minimize="window" class="interface"><i class="'+b["interface"].buttons.minimize["class"]+'"></i></button>'),b.elements.handle.prepend(b.elements.buttons.minimize)),b.maximizable&&(b.elements.buttons={},b.elements.buttons.maximize=a('<button data-maximize="window" class="interface"><i class="'+b["interface"].buttons.maximize["class"]+'"></i></button>'),b.elements.handle.prepend(b.elements.buttons.maximize)),(b.maximizable||b.minimizable)&&(b.elements.buttons.restore=a('<button data-restore="window" class="interface"><i class="'+b["interface"].buttons.restore["class"]+'"></i></button>'),b.elements.handle.prepend(b.elements.buttons.restore)),c.$el.find("[data-dismiss=window]").length<=0&&b.elements.handle.prepend('<button type="button" class="close interface" data-dismiss="window" aria-hidden="true"><i class="glyphicon glyphicon-remove"></i></button>'),b.elements.body.html(b.bodyContent),b.elements.footer.html(b.footerContent),this.undock(),this.setSticky(b.sticky)},Window.prototype.undock=function(){var a=this;this.$el.css("visibility","hidden"),this.$el.appendTo("body"),this.centerWindow(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&this.options.references.window.bind("orientationchange resize",function(b){a.centerWindow()}),this.$el.on("touchmove",function(a){a.stopPropagation()}),this.initHandlers(),this.$el.hide(),this.options.id?this.id=this.options.id:this.id="",this.show()},Window.prototype.maximize=function(){this.$el.removeClass("minimized"),this.$el.addClass("maximized"),this.state="maximized";var c=0;this.options.window_manager&&(c=this.options.window_manager.getContainer().height()),this.$el.css({top:parseInt(a("body").css("paddingTop"),10),left:0,right:0,bottom:c,maxWidth:"none",width:"auto",height:"auto"}),this.$el.trigger(b+".maximize")},Window.prototype.minimize=function(){var a=this;this.$el.removeClass("maximized"),this.$el.addClass("minimized"),this.state="minimized";this.options.window_manager,"fade"===this.options.effect?this.$el.fadeOut(function(){a.$el.removeAttr("style")}):(this.$el.hide(),this.$el.removeAttr("style")),this.$el.trigger(b+".minimize")},Window.prototype.isMinimized=function(){return"minimized"===this.state},Window.prototype.isMaximized=function(){return"maximized"===this.state},Window.prototype.restore=function(){this.$el.removeClass("minimized"),this.$el.removeClass("maximized");var a={top:this.window_info.top,left:this.window_info.left,width:this.window_info.width,height:this.window_info.height};this.isMinimized()?"fade"===this.options.effect?(this.$el.attr("style","display: none;"),this.$el.css(a),this.$el.fadeIn()):(this.$el.attr("style","display: none;"),this.$el.css(a),this.$el.show()):(this.$el.removeAttr("style"),this.$el.css(a)),this.state=void 0,this.$el.trigger(b+".restore")},Window.prototype.show=function(a){var c=this;this.$el.css("visibility","visible");var d=function(){c.$el.trigger(b+".show"),a&&a.call(c,arguments)};"fade"===this.options.effect?this.$el.fadeIn(void 0,d):d.call(this.$el)},Window.prototype.setEffect=function(a){this.options.effect=a},Window.prototype.getEffect=function(){return this.options.effect},Window.prototype.centerWindow=function(){var a,c,d,e=parseInt(this.options.references.body.position().top,10)+parseInt(this.options.references.body.css("paddingTop"),10);this.options.sticky?(c=this.options.references.window.width()/2-this.$el.width()/2,a=this.options.references.window.height()/2-this.$el.height()/2):(c=this.options.references.window.width()/2-this.$el.width()/2,a=this.options.references.window.height()/2-this.$el.height()/2),e>a&&(a=e),d=this.options.references.window.height()-e-(parseInt(this.options.elements.handle.css("height"),10)+parseInt(this.options.elements.footer.css("height"),10))-45,this.options.elements.body.css("maxHeight",d),this.$el.css("left",c),this.$el.css("top",a),this.$el&&this.$el.length>0&&(this.window_info={top:this.$el.position().top,left:this.$el.position().left,width:this.$el.outerWidth(),height:this.$el.outerHeight()}),this.$el.trigger(b+".centerWindow")},Window.prototype.close=function(a){var c=this;this.options.parent?(this.options.parent.clearBlocker(),this.options.window_manager&&this.options.window_manager.setFocused(this.options.parent)):this.options.window_manager&&this.options.window_manager.windows.length>0&&this.options.window_manager.setNextFocused();var d=function(){c.$el.trigger(b+".close"),c.$el.remove(),a&&a.call(c)};"fade"===this.options.effect?this.$el.fadeOut(d):d.call(c.$el),this.$windowTab&&("fade"===this.options.effect?this.$windowTab.fadeOut(400,function(){c.$windowTab.remove()}):(this.$windowTab.hide(),this.$windowTab.remove()))},Window.prototype.on=function(){this.$el.on.apply(this.$el,arguments)},Window.prototype.sendToBack=function(){var a=!1;return this.options.window_manager&&(a=this.options.window_manager.sendToBack(this)),a},Window.prototype.setActive=function(a){a?(this.$el.addClass("active"),this.$windowTab&&this.$windowTab.addClass("label-primary"),this.$el.trigger("active")):(this.$el.removeClass("active"),this.$windowTab&&(this.$windowTab.removeClass("label-primary"),this.$windowTab.addClass("label-default")),this.$el.trigger("inactive"))},Window.prototype.setIndex=function(a){this.$el.css("zIndex",a)},Window.prototype.setWindowTab=function(a){this.$windowTab=a},Window.prototype.getWindowTab=function(){return this.$windowTab},Window.prototype.getTitle=function(){return this.options.title},Window.prototype.getElement=function(){return this.$el},Window.prototype.setSticky=function(a){this.options.sticky=a,a===!1?this.$el.css({position:"absolute"}):this.$el.css({position:"fixed"})},Window.prototype.getSticky=function(){return this.options.sticky},Window.prototype.setManager=function(a){this.options.window_manager=a},Window.prototype.initHandlers=function(){var b=this;this.$el.find("[data-dismiss=window]").on("click",function(a){a.stopPropagation(),a.preventDefault(),b.options.blocker||b.close()}),this.$el.find("[data-maximize=window]").on("click",function(a){a.stopPropagation(),a.preventDefault(),b.options.blocker||b.maximize()}),this.$el.find("[data-minimize=window]").on("click",function(a){a.stopPropagation(),a.preventDefault(),b.options.blocker||b.minimize()}),this.$el.find("[data-restore=window]").on("click",function(a){b.options.blocker||b.restore()}),this.$el.off("mousedown"),this.$el.on("mousedown",function(){return b.options.blocker?(b.options.blocker.getElement().trigger("focused"),void b.options.blocker.blink()):(b.$el.trigger("focused"),void((b.$el.hasClass("ns-resize")||b.$el.hasClass("ew-resize"))&&(a("body > *").addClass("disable-select"),b.resizing=!0,b.offset={},b.offset.x=event.pageX,b.offset.y=event.pageY,b.window_info={top:b.$el.position().top,left:b.$el.position().left,width:b.$el.outerWidth(),height:b.$el.outerHeight()},event.offsetY<5&&b.$el.addClass("north"),event.offsetY>b.$el.height()-5&&b.$el.addClass("south"),event.offsetX<5&&b.$el.addClass("west"),event.offsetX>b.$el.width()-5&&b.$el.addClass("east"))))}),b.options.references.body.on("mouseup",function(){b.resizing=!1,a("body > *").removeClass("disable-select"),b.$el.removeClass("west"),b.$el.removeClass("east"),b.$el.removeClass("north"),b.$el.removeClass("south")}),b.options.elements.handle.off("mousedown"),b.options.elements.handle.on("mousedown",function(c){b.options.blocker||(b.moving=!0,b.offset={},b.offset.x=c.pageX-b.$el.position().left,b.offset.y=c.pageY-b.$el.position().top,a("body > *").addClass("disable-select"))}),b.options.elements.handle.on("mouseup",function(c){b.moving=!1,a("body > *").removeClass("disable-select")}),b.options.references.body.on("mousemove",b.$el,function(c){if(b.moving&&"maximized"!==b.state&&(a(c.toElement).hasClass(b.options.selectors.handle.replace(".",""))||a(c.toElement).hasClass(b.options.selectors.title.replace(".","")))){b.options.elements.handle.position().top,b.options.elements.handle.position().left;b.$el.css("top",c.pageY-b.offset.y),b.window_info.top=c.pageY-b.offset.y,b.$el.css("left",c.pageX-b.offset.x),b.window_info.left=c.pageX-b.offset.x,b.window_info.width=b.$el.outerWidth(),b.window_info.height=b.$el.outerHeight()}b.options.resizable&&b.resizing&&(b.$el.hasClass("east")&&b.$el.css("width",c.pageX-b.window_info.left),b.$el.hasClass("west")&&(b.$el.css("left",c.pageX),b.$el.css("width",b.window_info.width+(b.window_info.left-c.pageX))),b.$el.hasClass("south")&&b.$el.css("height",c.pageY-b.window_info.top),b.$el.hasClass("north")&&(b.$el.css("top",c.pageY),b.$el.css("height",b.window_info.height+(b.window_info.top-c.pageY))))}),this.$el.on("mousemove",function(a){b.options.blocker||b.options.resizable&&(a.offsetY>b.$el.height()-5||a.offsetY<5?b.$el.addClass("ns-resize"):b.$el.removeClass("ns-resize"),a.offsetX>b.$el.width()-5||a.offsetX<5?b.$el.addClass("ew-resize"):b.$el.removeClass("ew-resize"))})},Window.prototype.resize=function(a){a=a||{},a.top&&this.$el.css("top",a.top),a.left&&this.$el.css("left",a.left),a.height&&this.$el.css("height",a.height),a.width&&this.$el.css("width",a.width),this.$el.trigger(b+".resize")},Window.prototype.setBlocker=function(a){this.options.blocker=a,this.$el.find(".disable-shade").remove();var b='<div class="disable-shade"></div>';this.options.elements.body.append(b),this.options.elements.body.addClass("disable-scroll"),this.options.elements.footer.append(b),"fade"===this.options.effect?this.$el.find(".disable-shade").fadeIn():this.$el.find(".disable-shade").show(),this.options.blocker.getParent()||this.options.blocker.setParent(this)},Window.prototype.getBlocker=function(){return this.options.blocker},Window.prototype.clearBlocker=function(){this.options.elements.body.removeClass("disable-scroll"),"fade"===this.options.effect?this.$el.find(".disable-shade").fadeOut(function(){this.remove()}):(this.$el.find(".disable-shade").hide(),this.remove()),delete this.options.blocker},Window.prototype.setParent=function(a){this.options.parent=a,this.options.parent.getBlocker()||this.options.parent.setBlocker(this)},Window.prototype.getParent=function(){return this.options.parent},Window.prototype.blink=function(){var a=this,b=this.$el.hasClass("active"),c=this.getWindowTab(),d=c?c.hasClass("label-primary"):void 0,e=setInterval(function(){a.$el.toggleClass("active"),c&&c.toggleClass("label-primary")},250);setTimeout(function(){clearInterval(e),b&&a.$el.addClass("active"),c&&d&&c.addClass("label-primary")},1e3)},a.fn.window=function(b){b=b||{};var c,d=a.extend({fromElement:this,selectors:{}},b||{});if("object"==typeof b)d.selectors.handle&&this.find(d.selectors.handle).css("cursor","move"),c=new Window(a.extend({},d,d));else if("string"==typeof b)switch(b){case"close":this.data("window").close();break;case"show":this.data("window").show();break;case"maximize":this.data("window").maximize()}return this},a("[data-window-target]").off("click"),a("[data-window-target]").on("click",function(){var b=a(this),c={selectors:{}};b.data("windowTitle")&&(c.title=b.data("windowTitle")),b.data("titleHandle")&&(c.selectors.title=b.data("titleHandle")),b.data("windowHandle")&&(c.selectors.handle=b.data("windowHandle")),b.data("clone")&&(c.clone=b.data("windowHandle")),a(b.data("windowTarget")).window(c)})}(jQuery);var WindowManager=null;!function(a){"use strict";WindowManager=function(a){return this.windows=[],a=a||{},this.initialize(a),this},WindowManager.prototype.findWindowByID=function(b){var c=null;return a.each(this.windows,function(a,d){console.log(arguments),d.id===b&&(c=d)}),c},WindowManager.prototype.destroyWindow=function(b){var c=this,d=!1;return a.each(this.windows,function(a,e){e===b&&(b.close(),c.windows.splice(a,1),c.resortWindows(),d=!0)}),d},WindowManager.prototype.closeWindow=WindowManager.prototype.destroyWindow,WindowManager.prototype.resortWindows=function(){var b=900;a.each(this.windows,function(a,c){c.setIndex(b+a)})},WindowManager.prototype.setFocused=function(b){for(var c;b.getBlocker();)b=b.getBlocker();a.each(this.windows,function(a,d){d.setActive(!1),d===b&&(c=a)}),this.windows.push(this.windows.splice(c,1)[0]),b.setActive(!0),this.resortWindows()},WindowManager.prototype.sendToBack=function(a){var b=this.windows.splice(this.windows.indexOf(a),1)[0];return this.windows.unshift(b),this.resortWindows(),!0},WindowManager.prototype.initialize=function(b){this.options=b,this.elements={},this.options.container&&(this.elements.container=a(this.options.container),this.elements.container.addClass("window-pane"))},WindowManager.prototype.getContainer=function(){var a;return this.elements&&this.elements.container&&(a=this.elements.container),a},WindowManager.prototype.setNextFocused=function(){this.setFocused(this.windows[this.windows.length-1])},WindowManager.prototype.addWindow=function(b){var c=this;return b.getElement().on("focused",function(a){c.setFocused(b)}),b.getElement().on("close",function(){c.destroyWindow(b),b.getWindowTab()&&b.getWindowTab().remove()}),b.on("bsw.restore",function(){c.resortWindows()}),this.options.container&&(b.setWindowTab(a('<span class="label label-default">'+b.getTitle()+'<button class="close">x</button></span>')),b.getWindowTab().find(".close").on("click",function(a){var c=b.getBlocker();c?c.blink():b.close()}),b.getWindowTab().on("click",function(a){var d=b.getBlocker();d?d.blink():(b.isMinimized()&&b.restore(),c.setFocused(b),b.getSticky()&&window.scrollTo(0,b.getElement().position().top))}),a(this.options.container).append(b.getWindowTab())),this.windows.push(b),b.setManager(this),this.setFocused(b),b},WindowManager.prototype.createWindow=function(a){var b=Object.create(a);this.options.windowTemplate&&!b.template&&(b.template=this.options.windowTemplate);var c=new Window(b);return this.addWindow(c)}}(jQuery);